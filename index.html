<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>Simple 3D's viewer</title>
   <link href="css/style.css" type="text/css" rel="stylesheet">

    <script src="js/lib/three.min.js"
            type="text/javascript"></script>
    <script src="js/lib/Controls.js"
            type="text/javascript"></script>
    <script src="js/lib/Detector.js"
            type="text/javascript"></script>
    <script src="js/lib/STLLoader.js"
            type="text/javascript"></script>
</head>
<body>
<div id="container"></div>
    <script>
        //проверяем, работает ли webgl
        if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

        var container, stats;
        var camera, controls, scene, renderer;

        init();
        render();

        function init() {

            camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );
            camera.position.z = 500;

            controls = new THREE.OrbitControls( camera );
            controls.addEventListener( 'change', render );

            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2( 0xcccccc, 0.002 );

            // world

            var loader = new THREE.STLLoader();
            loader.addEventListener('load', function(event) {
                var geometry = event.content;
                var material = new THREE.MeshBasicMaterial({color: 0x000000});
                var mesh = new THREE.Mesh(geometry, material);

                mesh.position.set( 0, 10, 0 );
                mesh.rotation.set( 0,  Math.PI, 0 );
                mesh.scale.set( 0.5, 0.5, 0.5 );

                mesh.castShadow = true;
                mesh.receiveShadow = true;

                scene.add( mesh );
            });

            loader.load( 'stl/owl.stl' );

            // lights

            light = new THREE.DirectionalLight( 0xffffff );
            light.position.set( 1, 1, 1 );
            scene.add( light );

            light = new THREE.DirectionalLight( 0x002280 );
            light.position.set( -1, -1, -1 );
            scene.add( light );

            light = new THREE.AmbientLight( 0x222222 );
            scene.add( light );


            // renderer

            renderer = new THREE.WebGLRenderer( { antialias: true } );
            renderer.setClearColor( scene.fog.color, 1 );
            renderer.setSize( window.innerWidth, window.innerHeight);

            container = document.getElementById( 'container' );
            container.appendChild( renderer.domElement );

            /*stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            stats.domElement.style.zIndex = 100;
            container.appendChild( stats.domElement );
            */
            //

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function onWindowResize() {

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

            render();

        }

        function render() {

            renderer.render( scene, camera );
            //stats.update();

        }




        render();
    </script>

</body>
</html>